{"ast":null,"code":"var _jsxFileName = \"/Users/sophiabanou/Documents/code/eam-1/react-todo-app/src/components/Courses/index.js\",\n  _s = $RefreshSig$();\nimport './index.css';\nimport React, { useEffect, useState } from 'react';\nimport { doc, getDoc, updateDoc, arrayUnion } from 'firebase/firestore';\nimport './index.css';\nimport { Logout } from '../../Utils/Methods';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Courses({\n  db\n}) {\n  _s();\n  const [courses, setCourses] = useState();\n  const [searchCourse, setSearchCourse] = useState();\n  const [addCourse, setAddCourse] = useState();\n\n  // Get all courses from the db\n  async function getAllCoursesFunc(e) {\n    e.preventDefault();\n\n    //\"Bring me, from the collection 'courses' the document with name/value 'all_courses'\"\n    const ref = doc(db, \"courses\", \"all_courses\");\n    const res = await getDoc(ref);\n    if (res.exists()) {\n      // This part just make your response look more like a JSON and less like a text\n      var ugly = JSON.stringify(res.data());\n      var obj = JSON.parse(ugly);\n      var pretty = JSON.stringify(obj, undefined, 4);\n      // Save response to a string state\n      setCourses(pretty);\n    } else {\n      console.log(\"No such document!\");\n    }\n  }\n\n  // Search course in the db\n  async function searchCourseFunc(e) {\n    e.preventDefault();\n\n    //\"Bring me, from the collection 'courses' the document with name/value 'all_courses'\"\n    const ref = doc(db, \"courses\", \"all_courses\");\n    const res = await getDoc(ref);\n    if (res.exists()) {\n      // From the all the courses (res.data()) filter these courses that course.name includes searchCourse\n      const filtered = Object.values(res.data()).filter(course => course.name.includes(searchCourse));\n      var ugly = JSON.stringify(filtered);\n      var obj = JSON.parse(ugly);\n      var pretty = JSON.stringify(obj, undefined, 4);\n      // Save to string state\n      setCourses(pretty);\n    } else {\n      setCourses(\"No such document!\");\n      console.log(\"No such document!\");\n    }\n  }\n\n  // Update user data\n  async function pushCourseFunc(e) {\n    e.preventDefault();\n    const course = {\n      name: addCourse,\n      grade: 0\n    };\n    try {\n      // Get the users email from the local storage.\n      const user_mail = localStorage.getItem('email');\n      // For this user get all the data from the db\n      const ref = doc(db, \"users\", user_mail);\n\n      // The user's object has a 'courses' array. Update and push the new data in the array with arrayUnion function\n      const res = await updateDoc(ref, {\n        courses: arrayUnion(course)\n      });\n      console.log(res.status);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // The useEffect runs after every render and replaces\n  useEffect(() => {\n    // Every time you try to enter this page check if you have a saved key at the local storage. \n    // If not, then do not allow user to enter this page and redirect to login page\n    if (localStorage.getItem('role') === null) {\n      window.location.href = '/';\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"courses\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logout,\n      className: \"logout\",\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"welcome\",\n      children: [\"Welcome \", localStorage.getItem('email')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"courses-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"weird\",\n        children: \"This is not a 90s website\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Search Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"course-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Course Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: searchCourse,\n          onChange: e => setSearchCourse(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: searchCourseFunc,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          'marginTop': '30px'\n        },\n        onClick: getAllCoursesFunc,\n        children: \"Get All Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      rows: 5,\n      cols: 50,\n      style: {\n        'margin': '10px'\n      },\n      value: courses\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"add-course\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Push Course for user \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Course Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: addCourse,\n        onChange: e => setAddCourse(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: pushCourseFunc,\n        children: \" Add Course \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n_s(Courses, \"4ep5FSeDq7k2Iz1733BfKlsD1eU=\");\n_c = Courses;\nvar _c;\n$RefreshReg$(_c, \"Courses\");","map":{"version":3,"names":["React","useEffect","useState","doc","getDoc","updateDoc","arrayUnion","Logout","jsxDEV","_jsxDEV","Courses","db","_s","courses","setCourses","searchCourse","setSearchCourse","addCourse","setAddCourse","getAllCoursesFunc","e","preventDefault","ref","res","exists","ugly","JSON","stringify","data","obj","parse","pretty","undefined","console","log","searchCourseFunc","filtered","Object","values","filter","course","name","includes","pushCourseFunc","grade","user_mail","localStorage","getItem","status","window","location","href","className","children","onClick","logout","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","target","style","rows","cols","_c","$RefreshReg$"],"sources":["/Users/sophiabanou/Documents/code/eam-1/react-todo-app/src/components/Courses/index.js"],"sourcesContent":["import './index.css'\nimport React, { useEffect, useState } from 'react';\nimport { doc, getDoc, updateDoc, arrayUnion } from 'firebase/firestore'\nimport './index.css'\nimport { Logout } from '../../Utils/Methods';\n\nexport default function Courses({db}){\n\n    const [courses, setCourses] = useState();\n    const [searchCourse, setSearchCourse] = useState();\n    const [addCourse, setAddCourse] = useState();\n\n    // Get all courses from the db\n    async function getAllCoursesFunc (e){\n        e.preventDefault()\n        \n        //\"Bring me, from the collection 'courses' the document with name/value 'all_courses'\"\n        const ref = doc(db, \"courses\", \"all_courses\"); \n        const res = await getDoc(ref);\n\n        if (res.exists()) {\n            // This part just make your response look more like a JSON and less like a text\n            var ugly = JSON.stringify(res.data());\n            var obj = JSON.parse(ugly);\n            var pretty = JSON.stringify(obj, undefined, 4);\n            // Save response to a string state\n            setCourses(pretty)\n        } else {\n            console.log(\"No such document!\");\n        }\n    }\n\n    // Search course in the db\n    async function searchCourseFunc(e) {\n        e.preventDefault()\n\n        //\"Bring me, from the collection 'courses' the document with name/value 'all_courses'\"\n        const ref = doc(db, \"courses\", \"all_courses\");\n        const res = await getDoc(ref);\n\n        if (res.exists()) {\n            // From the all the courses (res.data()) filter these courses that course.name includes searchCourse\n            const filtered = Object.values(res.data()).filter(course => course.name.includes(searchCourse));\n\n            var ugly = JSON.stringify(filtered);\n            var obj = JSON.parse(ugly);\n            var pretty = JSON.stringify(obj, undefined, 4);\n            // Save to string state\n            setCourses(pretty)\n        } else {\n            setCourses(\"No such document!\")\n            console.log(\"No such document!\");\n        }\n    }\n\n    // Update user data\n    async function pushCourseFunc(e) {\n        e.preventDefault()\n        const course = {\n            name: addCourse,\n            grade: 0\n        };\n        try{\n            // Get the users email from the local storage.\n            const user_mail = localStorage.getItem('email')\n            // For this user get all the data from the db\n            const ref = doc(db, \"users\", user_mail)\n\n            // The user's object has a 'courses' array. Update and push the new data in the array with arrayUnion function\n            const res = await updateDoc(ref, {\n                courses: arrayUnion(course)\n            });\n\n            console.log(res.status)\n        }catch(e){\n          console.log(e)\n        }\n    }\n\n    // The useEffect runs after every render and replaces\n    useEffect(()=> {\n        // Every time you try to enter this page check if you have a saved key at the local storage. \n        // If not, then do not allow user to enter this page and redirect to login page\n        if (localStorage.getItem('role') === null) {\n            window.location.href = '/'\n        }\n    },[])\n\n    return(\n        <div className='courses'>\n            <button onClick={logout} className='logout'>Logout</button>\n            <h5 className='welcome'>Welcome {localStorage.getItem('email')}</h5>\n            <div className='courses-container'>\n                <h1 className='weird'>This is not a 90s website</h1>\n                <h2>Search Courses</h2>\n                <div className='course-row'>\n                    <label>Course Name:</label>\n                    &nbsp;&nbsp;&nbsp;\n                    <input\n                        type=\"text\"\n                        value={searchCourse}\n                        onChange={(e) => setSearchCourse(e.target.value)}\n                    />\n                    <button onClick={searchCourseFunc}>Search</button>\n                </div>\n                <button style={{'marginTop': '30px'}} onClick={getAllCoursesFunc}>Get All Courses</button>\n            </div>\n            <textarea rows={5} cols={50} style={{'margin': '10px'}} value={courses}/ >\n                <form className='add-course'>\n                    <h2>Push Course for user </h2>\n                    <label>Course Name:</label>\n                    &nbsp;&nbsp;&nbsp;\n                    <input\n                        type=\"text\"\n                        value={addCourse}\n                        onChange={(e) => setAddCourse(e.target.value)}\n                    />\n                    <button onClick={pushCourseFunc}> Add Course </button>\n                </form>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}